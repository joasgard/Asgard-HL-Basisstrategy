# Risk parameters for Delta Neutral Arbitrage Bot
# Spec version: 2.1

risk_limits:
  # Position Limits
  max_position_size_usd: 500000
  max_total_exposure_usd: 2000000
  max_positions_per_asset: 1
  
  # Leverage
  default_leverage: 3.0
  min_leverage: 2.0
  max_leverage: 4.0
  enforce_equal_leverage: true
  
  # Position Sizing
  min_position_usd: 1000
  default_deployment_pct: 0.10  # 10% of available capital
  max_deployment_pct: 0.50      # 50% max

  # Asgard (Solana)
  asgard:
    min_health_factor: 0.20
    emergency_health_factor: 0.10
    critical_health_factor: 0.05
    liquidation_proximity_threshold: 0.20  # 20% away from liquidation
    liquidation_proximity_duration: 20     # for 20+ seconds
  
  # Hyperliquid (Arbitrum)
  hyperliquid:
    margin_fraction_threshold: 0.10
    liquidation_proximity_threshold: 0.20  # 20% away from threshold
    liquidation_proximity_duration: 20     # for 20+ seconds
  
  # Execution
  max_price_deviation: 0.005        # 0.5%
  max_slippage_entry_bps: 50        # 0.5%
  max_slippage_exit_bps: 100        # 1.0%
  max_delta_drift: 0.005            # 0.5%
  max_delta_drift_critical: 0.02    # 2%
  
  # LST Monitoring
  lst:
    warning_premium: 0.03           # 3%
    critical_premium: 0.05          # 5%
    warning_discount: 0.01          # 1%
    critical_discount: 0.02         # 2%

# Fee Market (Solana)
fee_market:
  max_cup_micro_lamports: 10000     # ~0.001 SOL for 200k CU tx
  check_duration_seconds: 30
  fee_percentile: 75                # 75th percentile base
  fee_premium_pct: 25               # +25% premium
  max_fee_sol: 0.01                 # Max 0.01 SOL
  max_fee_emergency_sol: 0.02       # Max 0.02 SOL for stop-loss

# Funding Rate
funding:
  lookback_hours: 168               # 1 week
  min_history_hours: 24             # Need at least 24h of data
  max_volatility: 0.50              # 50% max volatility
  conservative_entry: true          # Both current AND predicted must be negative

# Monitoring
monitoring:
  poll_interval_seconds: 30
  max_single_leg_exposure_seconds: 120
  transaction_timeout_seconds: 300  # 5 minutes
  rebroadcast_threshold_seconds: 15

# Retry Configuration
retry:
  hyperliquid_max_retries: 15
  hyperliquid_retry_interval: 2.0
  asgard_max_retries: 3
  stop_loss_during_retry: true
  stop_loss_pct: 0.01               # 1% price move against position
